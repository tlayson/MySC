// Copyright Team Cowboy, LLC. All rights reserved. Contents of this file are not granted for use without prior permission.

var focusObject;$(document).ready(function(){bindImageCheckRadios("input[type=checkbox]","jqCheckbox_checkBox");bindImageCheckRadios("input[type=radio]","jqCheckbox_radioBox");$(".hoverbox").hoverbox({});if($.browser.msie==true){try{if(parseInt($.browser.version,10)<=8){$('select').bind('mousedown',false);}}catch(e){}}
var hoverConfig_nav={sensitivity:7,interval:100,over:function(){$("ul#topNav li.nav ul.subNav").not(this).hide();$(this).children("ul.subNav").show();},timeout:300,out:function(){$(this).children("ul.subNav").hide();}};$("ul#topNav li.nav").hoverIntent(hoverConfig_nav);$("ul#topNav li.nav a").click(function(){$("ul#topNav li.nav ul.subNav").hide();});TC_Util=new TC_Util();bindRSVPHotkeys();});function TC_Util(){var instance=this;this.DoAjaxAction=function(action,values,beforeCallback,successCallback,errorCallback){var ajax_url=TC_SITE_ROOT+"ajax/ajax_action.php";var ajax_data="action="+encodeURIComponent(action);$.each(values,function(key,value){ajax_data+='&'+encodeURIComponent(key)+"="+encodeURIComponent(value);});jqueryAjax(ajax_url,ajax_data,true,beforeCallback,successCallback,errorCallback);};this.SetCookie=function(name,value,expireDays){if(expireDays==null){expireDays=30;}
$.cookie(TC_COOKIE_PREFIX+"_"+name,value,{expires:expireDays,path:TC_COOKIE_PATH,domain:TC_COOKIE_DOMAIN});};this.GetCookie=function(name){return $.cookie(TC_COOKIE_PREFIX+"_"+name);};this.HideTopBar=function(selector,cookieSuffix){$(selector).slideUp({duration:500,complete:function(){TC_Util.SetCookie("topBarContent_hide_"+cookieSuffix,true);}});};this.wireJqDialogBox=function(dialogId,optionOverrides){$("#"+dialogId).dialog({title:"Team Cowboy",autoOpen:false,closeOnEscape:true,draggable:true,modal:true,resizable:false,show:null,hide:null,position:"center",minWidth:400,height:"auto",minHeight:100,zIndex:1000});if(optionOverrides){$("#"+dialogId).dialog("option",optionOverrides);}
return true;};this.setJqDialogBoxTitle=function(dialogId,dialogTitle){$("#"+dialogId).dialog("option",{title:dialogTitle});};this.SimpleDialog=function(dialogId,optionOverrides){$("#"+dialogId).dialog({title:"",autoOpen:false,closeOnEscape:true,draggable:true,modal:false,resizable:false,show:null,hide:null,position:"center",minWidth:200,minHeight:200,width:"auto",height:"auto",zIndex:1000});if(optionOverrides){$("#"+dialogId).dialog("option",optionOverrides);}
$("#"+dialogId).dialog("open");return true;};this.setContentBoxIcon=function(contentBoxId,iconClass,iconLabel){var iconBox=$("#cb_"+contentBoxId+"_headingBar_iconBox");if(iconClass==null||iconClass==""){$(iconBox).fadeOut("fast");return;}
$(".icon",iconBox).attr("class","icon "+iconClass);if(iconLabel==null){$(".iconLabel",iconBox).html("");}else{$(".iconLabel",iconBox).html(iconLabel);}
$(iconBox).fadeIn("fast");};this.ValidateRegistrationForm=function(){var minUsernameLength=parseInt(TC_USERNAME_MIN,10);var minPasswordLength=parseInt(TC_PW_MIN,10);var firstName=$('#firstName');var emailAddress=$('#emailAddress');var username=$('#username');var password1=$('#password1');var password2=$('#password2');if($.trim($(firstName).val())==""){alert('Please enter your first name.');$(firstName).focus();$(firstName).select();return false;}
var usernameResult=this.ValidateUsername($(username).val());if(usernameResult!=true){alert(usernameResult);$(username).focus();$(username).select();return false;}
if(!isEmailValid($(emailAddress).val())){alert('Please enter a valid e-mail address.');$(emailAddress).focus();$(emailAddress).select();return false;}
var password1Val=$.trim($(password1).val());var password2Val=$.trim($(password2).val());if(password1Val==''||password2Val==''){alert('Please enter and verify your password.');$(password1).focus();$(password1).select();return false;}
if(password1Val.length<minPasswordLength){alert('Please choose a password that is at least '+minPasswordLength+' characters long.');$(password1).focus();$(password1).select();return false;}
if(password1Val!=password2Val){alert('Please make sure both password you have entered are the same.');$(password2).focus();$(password2).select();return false;}
return true;};this.ValidateUsername=function(username){var minUsernameLength=parseInt(TC_USERNAME_MIN,10);username=$.trim(username);if(username==""){return'Please enter a username.';}
if(username.indexOf(' ')>0){return'Please enter a username that does not contain any spaces.';}
if(username.length<minUsernameLength){return'Please enter a username that is '+minUsernameLength+' or more characters long.';}
return true;};this.DoTask=function(params){if(params.task==undefined){return false;}
if(params.data==undefined){params.data={};}
if(params.beforeSendCallback==undefined){params.beforeSendCallback=function(){};}
if(params.successCallback==undefined){params.successCallback=function(){};}
if(params.errorCallback==undefined){params.errorCallback=function(){};}
$.ajax({type:"POST",url:TC_SITE_ROOT+"ajax/ajax_doTask.php",data:{task:params.task,data:params.data},cache:false,async:(params.async==undefined)?true:params.async,contentType:"application/x-www-form-urlencoded",beforeSend:params.beforeSendCallback,success:function(Response){try{if(Response==null){params.errorcallback();return;}
params.successCallback(Response);}catch(e){params.errorCallback();}},error:function(XMLHttpRequest,textStatus,errorThrown){params.errorCallback();}});return true;};this.DoCheckboxTask=function(oChk,params){var params=$.extend({indicatorPosition:"below"},params||{});var tmpDate=new Date();var indicatorDivId=$(oChk).attr("indicatorDivId");if(indicatorDivId==""||indicatorDivId==undefined){indicatorDivId="chkIndicator_"+tmpDate.getTime()+"_"+parseInt(Math.random()*100000);$(oChk).attr("indicatorDivId",indicatorDivId);}
if($("#"+indicatorDivId).length==0){var indicatorClasses="smallText b hidden";var indicatorStyle="";if(params.indicatorPosition=="right"){indicatorClasses+=" inline";indicatorStyle="margin-left: 5px;";}
$(oChk).parent().append('<div id="'+indicatorDivId+'" class="'+indicatorClasses+'" style="'+indicatorStyle+'"></div>');}
var indicatorDiv=$("#"+indicatorDivId);if(params.beforeSendCallback==undefined){params.beforeSendCallback=function(){};}
if(params.successCallback==undefined){params.successCallback=function(){};}
if(params.errorCallback==undefined){params.errorCallback=function(){};}
var DoTaskParams={task:params.task,data:params.data,beforeSendCallback:function(){indicatorDiv.hide();indicatorDiv.html('<img src="'+TC_STATIC_URL+'images/ajax/anim_circleArrows.gif" width="10" height="10" alt="" border="0">');indicatorDiv.removeClass("successText");indicatorDiv.removeClass("errorText");indicatorDiv.show();params.beforeSendCallback();},successCallback:function(Response){try{if(Response.success!=true){if(Response.statusCode=="notSignedIn"){window.location=TC_LOGOUTPAGE+"?status=ajaxNotSignedIn&allowAutologin=0";}else{params.errorCallback();}}}catch(e){params.errorCallback();}
indicatorDiv.html("Saved!");indicatorDiv.addClass("successText");indicatorDiv.fadeIn("fast");setTimeout(function(){indicatorDiv.fadeOut("fast");},2000);params.successCallback();},errorCallback:function(){indicatorDiv.html("Error!");indicatorDiv.addClass("errorText");indicatorDiv.fadeIn("fast");if($(oChk).is(":checked")==true){$(oChk).attr("checked","");}else{$(oChk).attr("checked","checked");}
setTimeout(function(){indicatorDiv.fadeOut("fast");},2000);params.errorCallback();}};TC_Util.DoTask(DoTaskParams);};this.GetStateProvinces=function(countryId){var stateProvinces=false;if(countryId==""){return[];}
TC_Util.DoTask({task:"getStateProvinces",async:false,data:{countryId:countryId},successCallback:function(Response){try{stateProvinces=Response.data;}catch(e){stateProvinces=[];}},errorCallback:function(){}});return stateProvinces;};this.PopulateStateProvinceSelect=function(countryId,stateProvinceId,stateProvinceSelectId,showHideElementIds,progressIndicatorId,options){setProgressIndicator(progressIndicatorId,"progressBig");var stateProvinces=TC_Util.GetStateProvinces(countryId);setProgressIndicator(progressIndicatorId,"clear");if(stateProvinces!=false&&stateProvinces!=undefined){$("#"+stateProvinceSelectId).empty();if(stateProvinces.length>0){var blankSelectLabel="Select...";if(options.blankSelectLabel){blankSelectLabel=options.blankSelectLabel;}
$("#"+stateProvinceSelectId).append('<option value="">'+blankSelectLabel+'</option>')
$("#"+stateProvinceSelectId).append('<option value="">---------------------------</option>')
$.each(stateProvinces,function(){var selectedText="";if(this.id==stateProvinceId){selectedText=" selected";}
$("#"+stateProvinceSelectId).append('<option value="'+this.id+'"'+selectedText+'>'+this.name+'</option>')});$.each(showHideElementIds,function(){$("#"+this).show();});}else{$.each(showHideElementIds,function(){$("#"+this).hide();});}}else{$.each(showHideElementIds,function(){$("#"+this).hide();});}}
this.ValidateBirthDate=function(options){var options=$.extend({monthId:"",dayId:"",yearId:"",showTabs:false,errorCallback:function(){}},options||{});var BirthDateData={month:$("#"+options.monthId).val(),day:$.trim($("#"+options.dayId).val()),year:$.trim($("#"+options.yearId).val())};if(BirthDateData.month!=""||BirthDateData.day!=""||BirthDateData.year!=""){if(BirthDateData.month==""){options.errorCallback();if(options.showTabs==true){showTab(tabIdsArray,'profileInfo');}
alert('Please select the month for your Birth date.');$("#"+options.monthId).focus();return false;}
if(BirthDateData.day==""){options.errorCallback();if(options.showTabs==true){showTab(tabIdsArray,'profileInfo');}
alert('Please select the day for your Birth date.');$("#"+options.dayId).focus();return false;}
if(BirthDateData.year!=""){if(isNaN(BirthDateData.year)||BirthDateData.year.length!=4){options.errorCallback();if(options.showTabs==true){showTab(tabIdsArray,'profileInfo');}
alert('Please enter a valid 4-digit year for your Birth date (year is optional, but if entered, it must be a valid).');$("#"+options.yearId).focus();return false;}}
var dateValid=false;if(BirthDateData.month!=""&&BirthDateData.day!=""&&BirthDateData.year!=""){var dateString=BirthDateData.month+"/"+BirthDateData.day+"/"+BirthDateData.year;if(isValidDate(dateString)){var dateNow=new Date();var dateEntered=new Date(dateString);if(dateEntered.getTime()<=dateNow.getTime()){dateValid=true;}}}else if(BirthDateData.month!=""&&BirthDateData.day!=""){if(BirthDateData.month==2){if(BirthDateData.day<=29){dateValid=true;}}else{var date=new Date();var year=date.getFullYear();var daysInSelectedMonth=daysInMonth(BirthDateData.month,year);if(parseInt(BirthDateData.day,10)<=daysInSelectedMonth){dateValid=true;}}}
if(dateValid==false){options.errorCallback();alert('The date you have entered for your birth date is not valid.');$("#"+options.monthId).focus();return false;}}
return true;};this.AddOverlay=function(element,options){options=$.extend({showIcon:true,overlayIcon:"spinner",autoCenterIcon:true,iconTopMargin:20,overlayText:null,padding:10,clickToClose:false},options||{});if($(element).length!=1){return false;}
TC_Util.HideOverlay(element,{});if(options.overlayText==null||options.overlayText==undefined||options.overlayText==""){options.overlayText=null;}
$(element).css("position","relative");var dimensions={width:$(element).outerWidth(),height:$(element).outerHeight(),leftBorderWidth:$(element).css("border-left-width"),topBorderWidth:$(element).css("border-top-width"),rightBorderWidth:$(element).css("border-right-width"),bottomBorderWidth:$(element).css("border-bottom-width")};dimensions.leftBorderWidth=parseInt(dimensions.leftBorderWidth.replace("px",""),10);dimensions.topBorderWidth=parseInt(dimensions.topBorderWidth.replace("px",""),10);dimensions.rightBorderWidth=parseInt(dimensions.rightBorderWidth.replace("px",""),10);dimensions.bottomBorderWidth=parseInt(dimensions.bottomBorderWidth.replace("px",""),10);var overlayId=$(element).attr("id")+"_overlay_"+parseInt(Math.random()*100000);$(element).attr("overlayId",overlayId);var overlayDiv=$('<div class="overlay"></div>').css({top:(dimensions.topBorderWidth*-1)-options.padding,left:(dimensions.leftBorderWidth*-1)-options.padding,width:dimensions.width+(options.padding*2),height:dimensions.height+(options.padding*2)}).attr("id",overlayId);if(options.clickToClose==true){$(overlayDiv).click(function(){TC_Util.HideOverlay(element,{doDelay:false,doFade:false});});}
var overlayTextHtml="";if(options.overlayText!=null){overlayTextHtml='<div class="overlay-progress-text">'+options.overlayText+'</div>';}
var overlayIconClass="overlay-progress-icon-none";if(options.showIcon==true){overlayIconClass="overlay-progress-icon-"+options.overlayIcon;}
var progressIndicator=$('<div class="overlay-progress-container"><div class="'+overlayIconClass+'"></div>'+overlayTextHtml+'</div>');$(overlayDiv).append(progressIndicator);$(element).append(overlayDiv);$(overlayDiv).show();if(options.showIcon==true){var progressTopMargin
if(options.autoCenterIcon==true){var overlayHeight=$(overlayDiv).outerHeight();var progressHeight=$(progressIndicator).outerHeight();progressTopMargin=Math.floor((overlayHeight-progressHeight)/2);}else{progressTopMargin=options.iconTopMargin;}
$(progressIndicator).css({marginTop:progressTopMargin+"px"});}
return overlayId;};this.HideOverlay=function(element,options){options=$.extend({doDelay:false,delayTime:800,doFade:false,fadeCallback:function(){}},options||{});var overlayId=$(element).attr("overlayId");if(options.doDelay==false){options.delayTime=0;}
window.setTimeout(function(){if(options.doFade==true){$("#"+overlayId).fadeOut("fast",function(){if(options.fadeCallback!=undefined){options.fadeCallback();}});}else{$("#"+overlayId).hide();}},options.delayTime);};this.GetEventTypeInterfaceOptions=function(eventType,addEditMode){if(addEditMode!="add"&&addEditMode!="edit"){addEditMode=add;}
var options={showStatus:false,showStartDate:false,showStartTime:false,showStartTimeTBD:false,showEndDate:false,showEndTime:false,showEndTimeTBD:false,showTimezone:false,showEventRepeat:false,showSeason:false,showHomeAway:false,showShirtColor:false,showOpponentShirtColor:false,showTitle:false,showLocation:false,showComments:false,showOptions:false,showRsvpLimitOptions:false,showScoreEntry:false,showScoreEntry2ndGame:false,titleLabel:"Title",titleLabelSentence:"",titleFieldRequired:false,bindOpponentAutocomplete:false,requiredFields:{status:false,startDate:true,startTime:false,endDate:false,endTime:false,timezone:true,season:false,homeAway:false,shirtColor:false,opponentShirtColor:false,title:false,location:false,comments:false}};if(eventType==""){eventType="game";}
if(eventType=="game"||eventType=="doubleheader"||eventType=="postseason"||eventType=="match"||eventType=="meet"){options.showStartDate=true;options.showStartTime=true;options.showStartTimeTBD=true;options.showEndDate=true;options.showEndTime=true;options.showEndTimeTBD=true;options.showTimezone=true;options.showEventRepeat=true;options.showSeason=true;options.showHomeAway=true;options.showShirtColor=true;options.showOpponentShirtColor=true;options.showTitle=true;options.showLocation=true;options.showComments=true;options.showOptions=true;options.showRsvpLimitOptions=true;options.showScoreEntry=true;if(eventType=="doubleheader"){options.showScoreEntry2ndGame=true;}
options.titleLabel="Opponent";options.titleLabelSentence="an opponent name";options.titleFieldRequired=true;options.bindOpponentAutocomplete=true;options.requiredFields.startTime=true;options.requiredFields.timezone=true;options.requiredFields.title=true;}else if(eventType=="tournament"||eventType=="jamboree"||eventType=="race"||eventType=="regatta"){options.showStartDate=true;options.showStartTime=true;options.showStartTimeTBD=true;options.showEndDate=true;options.showEndTime=true;options.showEndTimeTBD=true;options.showTimezone=true;options.showEventRepeat=true;options.showSeason=true;options.showHomeAway=true;options.showShirtColor=true;options.showOpponentShirtColor=false;options.showTitle=true;options.showLocation=true;options.showComments=true;options.showOptions=true;options.showRsvpLimitOptions=true;options.showScoreEntry=true;options.showScoreEntry2ndGame=false;options.titleLabel="Event title";options.titleLabelSentence="an event title";options.titleFieldRequired=true;options.bindOpponentAutocomplete=false;options.requiredFields.startTime=true;options.requiredFields.timezone=true;options.requiredFields.title=true;}else if(eventType=="ride"){options.showStartDate=true;options.showStartTime=true;options.showStartTimeTBD=true;options.showEndDate=true;options.showEndTime=true;options.showEndTimeTBD=true;options.showTimezone=true;options.showEventRepeat=true;options.showSeason=true;options.showHomeAway=false;options.showShirtColor=false;options.showOpponentShirtColor=false;options.showTitle=true;options.showLocation=true;options.showComments=true;options.showOptions=true;options.showRsvpLimitOptions=true;options.showScoreEntry=false;options.showScoreEntry2ndGame=false;options.titleLabel="Ride title";options.titleLabelSentence="a ride title";options.titleFieldRequired=true;options.bindOpponentAutocomplete=false;options.requiredFields.startTime=true;options.requiredFields.timezone=true;options.requiredFields.title=true;}else if(eventType=="practice"||eventType=="training"){options.showStartDate=true;options.showStartTime=true;options.showStartTimeTBD=true;options.showEndDate=true;options.showEndTime=true;options.showEndTimeTBD=true;options.showTimezone=true;options.showEventRepeat=true;options.showSeason=true;options.showHomeAway=false;options.showShirtColor=false;options.showOpponentShirtColor=false;options.showTitle=false;options.showLocation=true;options.showComments=true;options.showOptions=true;options.showRsvpLimitOptions=true;options.showScoreEntry=false;options.showScoreEntry2ndGame=false;options.titleLabel="";options.titleFieldRequired=true;options.bindOpponentAutocomplete=false;options.requiredFields.startTime=true;options.requiredFields.timezone=true;}else if(eventType=="scrimmage"||eventType=="pickup"){options.showStartDate=true;options.showStartTime=true;options.showStartTimeTBD=true;options.showEndDate=true;options.showEndTime=true;options.showEndTimeTBD=true;options.showTimezone=true;options.showEventRepeat=true;options.showSeason=true;options.showHomeAway=false;options.showShirtColor=true;options.showOpponentShirtColor=false;options.showTitle=true;options.showLocation=true;options.showComments=true;options.showOptions=true;options.showRsvpLimitOptions=true;options.showScoreEntry=true;options.showScoreEntry2ndGame=false;options.titleLabel="Opponent";options.titleLabelSentence="an opponent name";options.titleFieldRequired=false;options.bindOpponentAutocomplete=true;options.requiredFields.startTime=true;options.requiredFields.timezone=true;}else if(eventType=="bye"){options.showStartDate=true;options.showStartTime=false;options.showStartTimeTBD=false;options.showEndDate=false;options.showEndTime=false;options.showEndTimeTBD=false;options.showTimezone=true;options.showEventRepeat=true;options.showSeason=true;options.showHomeAway=false;options.showShirtColor=false;options.showOpponentShirtColor=false;options.showTitle=false;options.showLocation=false;options.showComments=true;options.showOptions=false;options.showRsvpLimitOptions=false;options.showScoreEntry=false;options.showScoreEntry2ndGame=false;options.titleLabel="";options.titleFieldRequired=false;options.bindOpponentAutocomplete=false;options.requiredFields.startTime=true;options.requiredFields.timezone=true;}else if(eventType=="meeting"||eventType=="other"){options.showStartDate=true;options.showStartTime=true;options.showStartTimeTBD=true;options.showEndDate=true;options.showEndTime=true;options.showEndTimeTBD=true;options.showTimezone=true;options.showEventRepeat=true;options.showSeason=true;options.showHomeAway=false;options.showShirtColor=false;options.showOpponentShirtColor=false;options.showTitle=true;options.showLocation=true;options.showComments=true;options.showOptions=true;options.showRsvpLimitOptions=true;options.showScoreEntry=false;options.showScoreEntry2ndGame=false;if(eventType=="meeting"){options.titleLabel="Meeting title";options.titleLabelSentence="a meeting title";}else if(eventType=="other"){options.titleLabel="Event title";options.titleLabelSentence="an event title";}
options.titleFieldRequired=false;options.bindOpponentAutocomplete=false;options.requiredFields.startTime=true;options.requiredFields.timezone=true;}
if(addEditMode=="add"){options.showScoreEntry=false;options.showScoreEntry2ndGame=false;}else if(addEditMode=="edit"){options.showStatus=true;options.requiredFields.status=true;}
if(options.showTitle==false){options.titleLabel="";options.titleLabelSentence="";options.titleFieldRequired=false;}
return options;};this.RedirectToLoginPage=function(){window.location=TC_LOGOUTPAGE;};}
function bindImageCheckRadios(selector,className){$(selector).checkbox({cls:className,empty:TC_STATIC_URL+'images/checkbox/img-plhlder.png'});}
function setLastFocus(obj){focusObject=obj;}
function getLastFocus(){return focusObject;}
function openWindow(url,windowName,width,height){var winl,wint;var settings='';if(screen.width){winl=(screen.width-width)/2;wint=(screen.height-height)/2;}else{winl=0;wint=0;}
if(winl<0){winl=0;}
if(wint<0){wint=0;}
settings+='height='+height+',';settings+='width='+width+',';settings+='top=200,left=200,';settings+='directories=no,location=no,menubar=no,scrollbars=yes,status=no,toolbar=no,resizable=yes';var win=window.open(url,windowName,settings);return win;}
function trim(str){if(str===""||str==null){return str;}
if(str.charAt){while(str.charAt(0)==' '){str=str.substring(1);}
while(str.charAt(str.length-1)==' '){str=str.substring(0,str.length-1);}
return str;}else{return str;}}
function isEmailValid(sEmail){sEmail=trim(sEmail);if(sEmail===''){return false;}
var filter=/^([a-zA-Z0-9\.!&#%'\-\*\+/=\?\^_`{}|~])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(filter.test(sEmail)){return true;}else{return false;}}
function isValidZipcode(sZip){sZip=trim(sZip);if(sZip.length!==5&&sZip.length!==10&&sZip.length!==9&&sZip.length!==6&&sZip.length!==7){return false;}
if(sZip.length==5||sZip.length==9){if(isNaN(sZip)){return false;}}
if(sZip.length==10){if(!sZip.indexOf('-')==5&&!sZip.indexOf(' ')==5){return false;}
var firstFive=sZip.substring(0,5);var lastFour=sZip.substring(6,10);if(isNaN(firstFive)||isNaN(lastFour)){return false;}}
if(sZip.length==6){if(!isNaN(sZip)){return false;}
var firstChar=sZip.substring(0,1);if(!isNaN(firstChar)){return false;}}
if(sZip.length==7){if(!isNaN(sZip)){return false;}
firstChar=sZip.substring(0,1);if(!isNaN(firstChar)){return false;}
if(!sZip.indexOf('-')==3&&!sZip.indexOf(' ')==3){return false;}}
return true;}
function addDays(myDate,days){return new Date(myDate+(days*24*60*60*1000));}
function FormatNumber(expr,decplaces,decimalSeparator,digitGroupSeparator){if(isNaN(expr)||isNaN(parseFloat(expr,10))){return expr;}
if(decimalSeparator==null){decimalSeparator=".";}
if(digitGroupSeparator==null){digitGroupSeparator=",";}
var str=""+Math.round(eval(expr)*Math.pow(10,decplaces));while(str.length<=decplaces){str="0"+str;}
var decpoint=str.length-decplaces;var formatted;formatted=str.substring(0,decpoint)+decimalSeparator+str.substring(decpoint,str.length);formatted=AddCommas(formatted,decimalSeparator,digitGroupSeparator);return formatted;}
function AddCommas(nStr,decimalSeparator,digitGroupSeparator)
{if(decimalSeparator==null){decimalSeparator=".";}
if(digitGroupSeparator==null){digitGroupSeparator=",";}
nStr+='';x=nStr.split(decimalSeparator);x1=x[0];x2=x.length>1?decimalSeparator+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+digitGroupSeparator+'$2');}
return x1+x2;}
function isLeapYear(yr){if(yr%4!==0){return false;}
else if(yr%400===0){return true;}
else if(yr%100===0){return false;}
else{return true;}}
function daysInMonth(mn,yr){var mDay;mn=parseInt(mn,10);yr=parseInt(yr,10);if((mn===4)||(mn===6)||(mn===9)||(mn===11)){mDay=30;}else if(mn===2){mDay=isLeapYear(yr)?29:28;}else{mDay=31;}
return mDay;}
function isValidDate(sDate){sDate=trim(sDate);var dateSplit=sDate.split("/");if(dateSplit.length!==3){return false;}
var month=trim(dateSplit[0]);var day=trim(dateSplit[1]);var year=trim(dateSplit[2]);month=parseInt(month,10);day=parseInt(day,10);year=parseInt(year,10);if(isNaN(month)||isNaN(day)||isNaN(year)){return false;}
if(isNaN(month)||isNaN(day)||isNaN(year)){return false;}
if(month<1||month>12){return false;}
if(day<1||day>31){return false;}
if(year.length===2){if(year<70){year=2000+year;}else{year=1900+year;}}else if(year.length===3){return false;}
if(day>daysInMonth(month,year)){return false;}
return true;}
function isValidTime(sTime){sTime=trim(sTime);if(sTime===''){return true;}
if(sTime.indexOf(":")<0){return false;}
var timeSplit=sTime.split(":");timeSplit[0]=trim(timeSplit[0]);timeSplit[1]=trim(timeSplit[1]);if(isNaN(timeSplit[0])||isNaN(timeSplit[1])){return false;}
if(parseInt(timeSplit[0],10)<1||parseInt(timeSplit[0],10)>12){return false;}
if(parseInt(timeSplit[1],10)<0||parseInt(timeSplit[1],10)>59||timeSplit[1].length!==2){return false;}
return true;}
function getRadioValue(objRadio){var itemChecked=false;if(objRadio){for(var i=0;i<objRadio.length;i++){if(objRadio[i].checked){itemChecked=true;return objRadio[i].value;}}
return"";}else{return'';}}
function setRadioValue(objRadio,sValue){if(objRadio){for(var i=0;i<objRadio.length;i++){if(objRadio[i].value===sValue){objRadio[i].checked=true;}}}}
function showHideElement(elementId,action){var oElement=document.getElementById(elementId);if(oElement){if(action==='show'){oElement.style.display='';}else if(action==='hide'){oElement.style.display='none';}else if(action==='toggle'){if(oElement.style.display===''){oElement.style.display='none';}else{oElement.style.display='';}}
return oElement;}else{return false;}}
function setClass(elementId,className){var oElement=document.getElementById(elementId);if(oElement){oElement.className=className;}}
function showHideExpandIcon(elementId,iconId,action,root){var oElement=showHideElement(elementId,action);var oIcon=document.getElementById(iconId);if(oElement.style.display==='none'){oIcon.src=TC_STATIC_URL+'images/icons/arrow-right-16.gif';}else{oIcon.src=TC_STATIC_URL+'images/icons/arrow-down-16.gif';}}
function toggleExpandIcon(iconId,action,root){var oIcon=document.getElementById(iconId);if(oIcon){if(action=='toggle'){if(oIcon.src.indexOf('arrow-right')>=0){oIcon.src=TC_STATIC_URL+'images/icons/arrow-down-16.gif';}else{oIcon.src=TC_STATIC_URL+'images/icons/arrow-right-16.gif';}}else if(action=='show'){oIcon.src=TC_STATIC_URL+'images/icons/arrow-down-16.gif';}else if(action=='hide'){oIcon.src=TC_STATIC_URL+'images/icons/arrow-right-16.gif';}}}
function jqShowHideExpandIcon(elementId,iconId,action,root,callback){var oElement=document.getElementById(elementId);$(document).ready(function(){if(root==null||root==""){root=TC_SITE_ROOT;}
if(callback==null){callback=function(){};}
toggleExpandIcon(iconId,action,root);if(action=='show'){$(oElement).slideDown("fast",callback);}else if(action=='hide'){$(oElement).slideUp("fast",callback);}else{$(oElement).slideToggle("fast",callback);}});}
function sortSelectOptions(a,b){if((a.text.toLowerCase()+"")<(b.text.toLowerCase()+"")){return-1;}
if((a.text.toLowerCase()+"")>(b.text.toLowerCase()+"")){return 1;}
return 0;}
function sortSelectBox(selectBoxId,options){options=$.extend({skipMode:"none",skipCount:0},options||{});var skippedOptions=[];var existingOptions=[];var obj=document.getElementById(selectBoxId);if(!obj.options){return;}
var optionsSkipped=0;if(options.skipMode=="blank"){for(var i=0;i<obj.options.length;i++){if(obj.options[i].value==""){skippedOptions[skippedOptions.length]=obj.options[i];optionsSkipped++;}else{break;}}}else if(options.skipMode=="count"){for(var i=0;i<options.optionCountToSkip;i++){skippedOptions[skippedOptions.length]=obj.options[i];optionsSkipped++;}}
for(var j=optionsSkipped;j<obj.options.length;j++){existingOptions[existingOptions.length]=obj.options[j];}
if(existingOptions.length===0){return;}
existingOptions=existingOptions.sort(sortSelectOptions);obj.length=0;for(i=0;i<skippedOptions.length;i++){obj.options[i]=skippedOptions[i];}
for(i=0;i<existingOptions.length;i++){var optionPos=optionsSkipped+i;obj.options[optionPos]=existingOptions[i];}}
function getCursorPosition(e){e=e||window.event;var cursor={x:0,y:0};if(e.pageX||e.pageY){cursor.x=e.pageX;cursor.y=e.pageY;}else{cursor.x=e.clientX+
(document.documentElement.scrollLeft||document.body.scrollLeft)-
document.documentElement.clientLeft;cursor.y=e.clientY+
(document.documentElement.scrollTop||document.body.scrollTop)-
document.documentElement.clientTop;}
return cursor;}
function f_filterResults(n_win,n_docel,n_body){var n_result;if(n_win){n_result=n_win;}else{n_result=0;}
if(n_docel&&(!n_result||(n_result>n_docel))){n_result=n_docel;}
var retValue;if(n_body&&(!n_result||(n_result>n_body))){retValue=n_body;}else{retValue=n_result;}
return retValue;}
function f_clientWidth(){var param1,param2,param3;if(window.innerWidth){param1=window.innerWidth;}else{param1=0;}
if(document.documentElement){param2=document.documentElement.clientWidth;}else{param2=0;}
if(document.body){param3=document.body.clientWidth;}else{param3=0;}
return f_filterResults(param1,param2,param3);}
function f_clientHeight(){var param1,param2,param3;if(window.innerHeight){param1=window.innerHeight;}else{param1=0;}
if(document.documentElement){param2=document.documentElement.clientHeight;}else{param2=0;}
if(document.body){param3=document.body.clientHeight;}else{param3=0;}
return f_filterResults(param1,param2,param3);}
function f_scrollLeft(){var param1,param2,param3;if(window.pageXOffset){param1=window.pageXOffset;}else{param1=0;}
if(document.documentElement){param2=document.documentElement.scrollLeft;}else{param2=0;}
if(document.body){param3=document.body.scrollLeft;}else{param3=0;}
return f_filterResults(param1,param2,param3);}
function f_scrollTop(){var param1,param2,param3;if(window.pageYOffset){param1=window.pageYOffset;}else{param1=0;}
if(document.documentElement){param2=document.documentElement.scrollTop;}else{param2=0;}
if(document.body){param3=document.body.scrollTop;}else{param3=0;}
return f_filterResults(param1,param2,param3);}
function getWindowSize(){var windowSize={width:0,height:0,scrollLeft:0,scrollTop:0,top:0,left:0};windowSize.width=f_clientWidth();windowSize.height=f_clientHeight();windowSize.scrollLeft=f_scrollLeft();windowSize.scrollTop=f_scrollTop();windowSize.top=windowSize.scrollTop;windowSize.bottom=windowSize.top+windowSize.height;windowSize.left=windowSize.scrollLeft;windowSize.right=windowSize.left+windowSize.width;return windowSize;}
function getPopupSizePosition(clientX,clientY,popupWidth,popupHeight,considerWindowScroll){var windowSize=getWindowSize();var popupSizePosition={width:0,height:0,top:0,left:0,bottom:0,right:0};popupSizePosition.width=popupWidth;popupSizePosition.height=popupHeight;popupSizePosition.bottom=popupHeight;popupSizePosition.right=popupWidth;if(considerWindowScroll==true){popupSizePosition.left=clientX+windowSize.scrollLeft+5;popupSizePosition.top=clientY+windowSize.scrollTop+5;}else{popupSizePosition.left=clientX+5;popupSizePosition.top=clientY+5;}
popupSizePosition.bottom=popupSizePosition.top+popupSizePosition.height;popupSizePosition.right=popupSizePosition.left+popupSizePosition.width;if(popupSizePosition.bottom>windowSize.bottom){popupSizePosition.top=windowSize.bottom-popupSizePosition.height-7;}
if(popupSizePosition.right>windowSize.right){popupSizePosition.left=windowSize.right-popupSizePosition.width-7;}
return popupSizePosition;}
function getObjectSize(objId){var size={width:0,height:0};var obj=document.getElementById(objId);if(document.layers){size.height=obj.document.height;size.width=obj.document.width;}else if(document.all){size.height=obj.offsetHeight;size.width=obj.offsetWidth;}
return size;}
function tabExists(tabIdsArray,tabId){if(!tabIdsArray){return false;}
var tabPresent=false;var contentDivId,tabElementId;for(var i=0;i<tabIdsArray.length;i++){if(tabIdsArray[i]!==tabId){continue;}
eval('contentDivId = \'tabContent_'+tabIdsArray[i]+'\'');eval('tabElementId = \'tab_'+tabIdsArray[i]+'\'');if(document.getElementById(contentDivId)&&document.getElementById(tabElementId)){tabPresent=true;break;}}
return tabPresent;}
function showTab(tabIdsArray,tabId,callback){var contentDivId,tabElementId;if(!tabExists(tabIdsArray,tabId)){tabId=tabIdsArray[0];}
for(var i=0;i<tabIdsArray.length;i++){eval('contentDivId = \'tabContent_'+tabIdsArray[i]+'\'');eval('tabElementId = \'tab_'+tabIdsArray[i]+'\'');$("#"+contentDivId).hide();$("#"+tabElementId).removeClass("on");}
eval('contentDivId = \'tabContent_'+tabId+'\'');eval('tabElementId = \'tab_'+tabId+'\'');$("#"+contentDivId).show();if(callback!=null){callback();}
$("#"+tabElementId).addClass("on");}
function trapKeypress(e,theKey){var iKeyCode=0;if(window.event){iKeyCode=window.event.keyCode;}else if(e){iKeyCode=e.which;}
return(iKeyCode!==theKey);}
function enterPressed(event){var result=trapKeypress(event,13);if(result===true){return false;}else{return true;}}
function trapEnter(event){return trapKeypress(event,13);}
function selectOption(selectBoxId,method,matchText){var oSelect=document.getElementById(selectBoxId);var optionValue='';var optionText='';if(oSelect&&oSelect.options){for(var i=0;i<oSelect.options.length;i++){optionValue=oSelect.options[i].value;optionText=oSelect.options[i].text;if(method==='value'&&matchText===optionValue){oSelect.options[i].selected=true;return;}else if(method==='text'&&matchText===optionText){oSelect.options[i].selected=true;return;}}}}
function SelectAllListboxItems(oListbox){if(!oListbox){return;}
for(var i=0;i<oListbox.options.length;i++){oListbox.options[i].selected=true;}}
function SetupJSCalendar(Calendar,inputField,triggerButton,yearRange){Calendar.setup({inputField:inputField,button:triggerButton,ifFormat:"%m/%e/%Y",daFormat:"%A, %B %d, %Y",align:"Br",range:yearRange.split(","),weekNumbers:false,cache:true});}
function doFade(id,opacStart,opacEnd,millisec,delayBeforeFade){var speed=Math.round(millisec/100);var timer=0;if(delayBeforeFade>0){setTimeout('doFade(\''+id+'\', '+opacStart+', '+opacEnd+', '+millisec+', 0);',delayBeforeFade);return;}
var i;if(opacStart>opacEnd){for(i=opacStart;i>=opacEnd;i--){setTimeout('changeOpac(\''+id+'\', '+i+', true)',(timer*speed));timer++;}}else if(opacStart<opacEnd){for(i=opacStart;i<=opacEnd;i++){setTimeout('changeOpac(\''+id+'\', '+i+', true)',(timer*speed));timer++;}}}
function changeOpac(id,opacity,hideWhenZero){var objectStyle=document.getElementById(id).style;objectStyle.opacity=(opacity/100);objectStyle.MozOpacity=(opacity/100);objectStyle.KhtmlOpacity=(opacity/100);objectStyle.filter="alpha(opacity="+opacity+")";if(hideWhenZero===true&&opacity===0){objectStyle.display='none';}}
function getSelectValue(id){var oSelect=document.getElementById(id);if(oSelect){return oSelect.options[oSelect.selectedIndex].value;}else{return"";}}
function getXMLParser(xmlSource){var doc;if(window.ActiveXObject){doc=new ActiveXObject("Microsoft.XMLDOM");doc.async="false";doc.loadXML(xmlSource);}else{var parser=new DOMParser();doc=parser.parseFromString(xmlSource,"text/xml");}
return doc;}
function reloadCaptcha(options){options=$.extend({captchaImageSelector:"#captcha",captchaInputSelector:"#captchaCode",captchaEncyptedCodeSelector:"#captchaCodeEncrypted",captchaAudioLinkSelector:"#captchaAudioLink"},options||{});$.ajax({url:TC_SITE_ROOT+"inc/common/classes/securImageCustom/ajaxGetEncryptedCode.php",type:'GET',async:true,cache:false,data:{},dataType:"json",error:function(jqXHR,textStatus,errorThrown){},success:function(Data,textStatus,jqXHR){try{$(options.captchaImageSelector).attr("src",TC_SITE_ROOT+"inc/common/classes/securImageCustom/streamImage.php?ecode="+jsEscape(Data.encryptedCode));$(options.captchaEncyptedCodeSelector).val(Data.encryptedCode);$(options.captchaAudioLinkSelector).attr("href",TC_SITE_ROOT+"inc/common/classes/securImageCustom/streamAudioCode.php?ecode="+jsEscape(Data.encryptedCode));$(options.captchaInputSelector).val("").focus();}catch(e){}}});}
function jqClearQueue(obj){$(obj).stop({clearQueue:true});}
function stopBubble(event){event.cancelBubble=true;if(event.stopPropagation){event.stopPropagation();}}
function closeJqDialog(dialogId){$("#"+dialogId).dialog("close");}
function centerJqDialog(dialogId){$("#"+dialogId).dialog("option",{position:"center"});}
function setupTeamMenu(){$(document).ready(function(){$("#st_menu").click(function(){$("#st_items_container").slideToggle("fast");});var hoverConfig_menuButton={sensitivity:7,interval:750,over:function(){$("#st_items_container").slideDown("fast");},timeout:0,out:function(){}};var hoverConfig_items_wrapper={sensitivity:7,interval:125,over:function(){$("#st_items_container").stop(true,false);},timeout:0,out:function(){$("#st_items_container").slideUp("fast",function(){});}};var hoverConfig_container={sensitivity:7,interval:125,over:function(){return;},timeout:0,out:function(){$("#st_items_container").slideUp("fast");}};$("#st_menu").hoverIntent(hoverConfig_menuButton);$("#st_container").hoverIntent(hoverConfig_container);$(".st_item_container").click(function(e){var a=$(e.target).find(".st_item_link");if(a){a.click();$("#st_items_wrapper_new").slideUp("fast");}});});}
function loadGMap(mapId,options){var mapDiv,Map,Geocoder,InfoWindow;$(document).ready(function(){if($("#"+mapId).length<=0){return;}
if(!options.zoomLevel){options.zoomLevel=13;}
Geocoder=new google.maps.Geocoder();Geocoder.geocode({"address":options.locationAddressBarePlain},function(results,status){if(status==google.maps.GeocoderStatus.OK){var LatLng=results[0].geometry.location;var mapOptions={mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:options.zoomLevel,center:LatLng,mapTypeControl:options.showTypeControl,mapTypeControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT,style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR},zoomControl:true,zoomControlOptions:{position:google.maps.ControlPosition.TOP_LEFT,style:google.maps.ZoomControlStyle.SMALL},draggingCursor:"test 123"}
var Map=new google.maps.Map(document.getElementById(mapId),mapOptions);Marker=new google.maps.Marker({map:Map,animation:google.maps.Animation.DROP,position:LatLng,title:options.locationName,draggable:false});var markerHtml='<div style="white-space: normal;"><h3>'+options.locationName+'</h3><a href="http://maps.google.com/maps?z='+options.zoomLevel+'&saddr=&daddr='+options.locationAddressEncoded+'" target="_blank"><b>Get directions/view larger map</b></a><img src="'+TC_STATIC_URL+'images/icons/external.png" alt="" width="10" height="10" border="0" class="valign iconMarginLeft"></div>';if(options.showMarkerDetails==true){InfoWindow=new google.maps.InfoWindow({content:markerHtml});google.maps.event.addListener(Marker,'click',function(){InfoWindow.open(Map,Marker);});}}else{}});});}
function setOnBeforeUnloadEvent(msg){window.onbeforeunload=function(){return msg;}}
function clearOnBeforeUnloadEvent(){window.onbeforeunload=function(){}}
function jqToggleCheckboxes(className,action){jqToggleCheckboxesBySelector("."+className,action);}
function jqToggleCheckboxesBySelector(selector,action){$(document).ready(function(){if(action=="check"||action==true){$(selector).attr("checked","true");}else{$(selector).attr("checked","");}});}
function jqueryAjax(ajax_url,ajax_data,ajax_async,beforeSendCallbackFunction,successCallbackFunction,errorCallbackFunction){$.ajax({type:"POST",url:ajax_url,data:ajax_data,cache:false,async:ajax_async,contentType:"application/x-www-form-urlencoded",beforeSend:beforeSendCallbackFunction,success:function(responseData,textStatus){jQueryAjax_checkSuccess(this,responseData,successCallbackFunction);},error:errorCallbackFunction});}
function jQueryAjax_checkSuccess(jqAjaxRequest,responseData,successCallbackFunction){if(responseData=="-1"){TC_Util.RedirectToLoginPage();}else if(responseData=="0"){jqAjaxRequest.error();}else if(successCallbackFunction!=null){successCallbackFunction(responseData);}}
function jsEscape(string){return encodeURIComponent(string);}
function formatDate(oInput,options){var options=$.extend({showAlerts:true},options||{});var inputDate=trim(oInput.value);if(inputDate==""){return;}
var dateNow=new Date();var now_month=dateNow.getMonth()+1;var now_day=dateNow.getDate();var now_year=dateNow.getFullYear();var regexString=/(\d{1,2})\/(\d{1,2})\/?(\d{2,})?/i;var regexMatches=regexString.exec(inputDate)
if(regexMatches!=null){var inputDate_month=parseInt(regexMatches[1],10);var inputDate_day=parseInt(regexMatches[2],10);var inputDate_year=regexMatches[3];if(inputDate_year==null){if(inputDate_month>=now_month-3){inputDate_year=now_year;}else{inputDate_year=now_year+1;}}else{inputDate_year=parseInt(inputDate_year,10);if(inputDate_year<100){inputDate_year+=2000;}}
var formattedValue=inputDate_month+'/'+inputDate_day+'/'+inputDate_year;oInput.value=formattedValue;}else{if(options.showAlerts==true){alert('Please enter a valid date');}
oInput.focus();}}
function changeSelectOptionOrder(selectId,moveAmount){var oSelect=document.getElementById(selectId);if(oSelect==null||oSelect=='undefined'){return false;}
if(moveAmount!='top'&&moveAmount!='bottom'&&isNaN(moveAmount)){return false;}
var currentSelectedIndex=oSelect.selectedIndex;if(currentSelectedIndex<0){return false;}
if(currentSelectedIndex==0&&moveAmount==-1){return false;}
if(currentSelectedIndex==oSelect.options.length-1&&moveAmount==1){return false;}
var fromSelectedIndex=currentSelectedIndex;var toSelectedIndex;var fromOption=oSelect.options[fromSelectedIndex];var fromValue=oSelect.options[fromSelectedIndex].value;var fromText=oSelect.options[fromSelectedIndex].text;var newOption;if(moveAmount=='top'){oSelect.remove(fromSelectedIndex);newOption=document.createElement("option");newOption.value=fromValue;newOption.innerHTML=fromText;oSelect.insertBefore(newOption,oSelect.firstChild);oSelect.selectedIndex=0;}else if(moveAmount=='bottom'){oSelect.remove(fromSelectedIndex);newOption=document.createElement("option");newOption.value=fromValue;newOption.innerHTML=fromText;oSelect.appendChild(newOption);oSelect.selectedIndex=oSelect.options.length-1;}else{toSelectedIndex=fromSelectedIndex+moveAmount;var toValue=oSelect.options[toSelectedIndex].value;var toText=oSelect.options[toSelectedIndex].text;oSelect.options[toSelectedIndex].value=fromValue;oSelect.options[toSelectedIndex].text=fromText;oSelect.options[toSelectedIndex].selected=true;oSelect.options[fromSelectedIndex].value=toValue;oSelect.options[fromSelectedIndex].text=toText;}
return true;}
function BuildQuerystring(params){var qs="";var value="";var valueType="";for(var key in params){value="";valueType=typeof(params[key]);if(valueType=="object"){try{value=params[key].join(",");}catch(e){}}else{value=params[key];}
qs+=key+"="+encodeURIComponent(value)+"&";}
return qs;}
function Linkify(inputText){if(inputText==undefined||inputText==""){return"";}
var replacedText;var replacePattern1=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;replacedText=inputText.replace(replacePattern1,'<a href="$1" target="_blank">$1</a>');var replacePattern2=/(^|[^\/])(www\.[a-zA-Z0-9][\S]+(\b|$))/gim;replacedText=replacedText.replace(replacePattern2,'$1<a href="http://$2" target="_blank">$2</a>');var replacePattern3=/(^| )([a-zA-Z][a-zA-Z0-9\-_]+\.[a-zA-Z]{2,3}(\b|$))/gim;replacedText=replacedText.replace(replacePattern3,'$1<a href="http://$2" target="_blank">$2</a>');var replacePattern4=/(\w+@[a-z0-9A-Z_]+?\.[a-zA-Z]{2,6})/gim;replacedText=replacedText.replace(replacePattern4,'<a href="mailto:$1">$1</a>');return replacedText}
function TrackGAEvent(category,action,label){try{pageTracker._trackEvent(category,action,label);}catch(e){}}
function bindDataListRowHover(selector){if(selector==null){selector=".dataList_row";}
$(selector).hover(function(){$(this).addClass("dataList_row_hover");},function(){$(this).removeClass("dataList_row_hover");});}
function parseJSON(jsonData){try{return(new Function("return "+jsonData))();}catch(e){return null;}}
function checkPermissionReqs(oChk,permissionReqs,categoryName,contextName,permissionName){var checkAction=oChk.checked;var reqs;var checkAttrValue;if(checkAction==true){reqs=permissionReqs[permissionName].reqs;checkAttrValue="checked";}else{reqs=permissionReqs[permissionName].revReqs;checkAttrValue="";}
reqsArray=reqs.split(",");if(reqsArray.length>0){$.each(reqsArray,function(){if(this==""){return;}
$("#permission_"+categoryName+"_"+contextName+"_"+this).attr("checked",checkAttrValue);});}}

function selectCheckboxesBySelector(selector, selectState)
{
	if (selectState == true)
	{
		$(selector).not(":disabled").attr("checked", "checked");
	}
	else
	{
		$(selector).not(":disabled").attr("checked", "");
	}
}
var fieldInfoHtml;
var fieldInfoClientX, fieldInfoClientY;
var fieldInfo_fieldId = '';
var previousEventId = '';
function showFieldInfo(event, gameId, fieldId)
{
	stopBubble(event);
	if (1 == 1 || previousEventId != gameId)
	{
		fieldInfoClientX = event.clientX;
		fieldInfoClientY = event.clientY;
		previousEventId = gameId;
		fieldInfo_fieldId = fieldId;
		ajax_getFieldInfoHtml(fieldId);
	}
	else
	{
		previousEventId = ''; $("#dialog_locationInfo").dialog("close");
	}
}

function closeFieldInfo()
{
	var oDiv = document.getElementById('divFieldInfo');
	$(document).ready(
	function ()
	{
		$(oDiv).fadeOut("fast");
	}
	);
	previousEventId = '';
}

function viewFieldPopup(htmlContent)
{

	var popupSizePosition = getPopupSizePosition(fieldInfoClientX, fieldInfoClientY, 450, 150, false);
	$("#dialog_locationInfo").html(htmlContent);
	TC_Util.wireJqDialogBox("dialog_locationInfo",
		{
			title: "Location Details",
			minWidth: popupSizePosition.width,
			minHeight: popupSizePosition.height,
			modal: false,
			position: [popupSizePosition.left, popupSizePosition.top]
		}
		);
	if ($("#dialog_locationInfo").dialog("isOpen") == true)
	{
		$("#dialog_locationInfo").dialog("close");
	}

	$("#dialog_locationInfo").dialog("open");
	loadGMap(
	'googleMap_fieldId_' + fieldInfo_fieldId,
	{
		showTypeControl: true,
		showMarkerDetails: true,
		zoomLevel: 12,
		locationName: $("#fieldId" + fieldInfo_fieldId + "_name").html(),
		locationAddressBarePlain: $("#fieldId" + fieldInfo_fieldId + "_address_bare").html(),
		locationAddressEncoded: $("#fieldId" + fieldInfo_fieldId + "_address_encoded").html()
	}
	);
}

function setSelectedScheduleRow(gameId,teamId,eventType,doLoadRSVPHtml,doScrollTo){if(!document.getElementById('gameIds')){return;}
var gameIds=document.getElementById('gameIds').value;var gameIdsArray=gameIds.split(",");$(document).ready(function(){$("#divFieldInfo").fadeOut("fast");});for(i=0;i<gameIdsArray.length;i++){var tempRow=document.getElementById('scheduleRow_'+gameIdsArray[i]);var tempIndicator=document.getElementById('scheduleRow_'+gameIdsArray[i]+'_selectionIndicator');var inPast=tempRow.getAttribute('inPast');if(inPast=='1'){tempIndicator.style.borderLeft='4px solid #dddddd';tempRow.className='tc_scheduleRow_gamePast';}else{tempIndicator.style.borderLeft='4px solid #eeeeee';tempRow.className='tc_scheduleRow_gameFuture';}
tempRow.setAttribute('lastClass',tempRow.className);}
$("#scheduleRow_"+gameId+"_selectionIndicator").css("borderLeft","4px solid #1B187F");$("#scheduleRow_"+gameId).attr("class","tc_scheduleRow_selectedRow");$("#scheduleRow_"+gameId).attr("lastClass","tc_scheduleRow_selectedRow");if(doLoadRSVPHtml==true){var loadCallback=function(){};if(doScrollTo==true){loadCallback=function(){gameRSVP_setAnchorFocus(true);};}
LoadEventHtml(gameId,teamId,eventType,true,loadCallback);}else if(doScrollTo==true){gameRSVP_setAnchorFocus(true);}}
function LoadEventHtml(gameId,teamId,eventType,showForm,callback){LoadGameRSVPHtml(eventType,gameId,showForm,callback);LoadGameAttendanceListHtml(gameId,eventType,teamId);$("#ad_side_175x").hide();}
function gameRSVPShowStatus(statusType){if(statusType=='complete'){TC_Util.setContentBoxIcon('rsvp','ajaxSuccess','Saved');setTimeout("TC_Util.setContentBoxIcon('rsvp', null);",2500);}else if(statusType=='error'){TC_Util.setContentBoxIcon('rsvp','ajaxError','Error');}else if(statusType=='reset'){TC_Util.setContentBoxIcon('rsvp',null);}}
function attendanceListShowStatus(statusType){if(statusType=='complete'){TC_Util.setContentBoxIcon('attList','ajaxSuccess');setTimeout("TC_Util.setContentBoxIcon('attList', null);",2500);}else if(statusType=='error'){TC_Util.setContentBoxIcon('attList','ajaxError');$("#spanAttendanceStatusText").html('<span class="errorText">Error!</span>');$("#spanAttendanceStatusText").show();}else if(statusType=='reset'){TC_Util.setContentBoxIcon('attList',null);$("#spanAttendanceStatusText").hide();}}
function gameRSVP_setCommentsFocus(userId){var oComments=$("#rsvp_comments_"+userId);var oDiv=$("#divPlayerRSVPForm_"+userId);if($(oComments).length>0&&$(oDiv).length>0&&$(oDiv).is(":visible")){oComments.focus();}}
function gameRSVP_setAnchorFocus(doEffect){if($("#cb_rsvp").is(":visible")){$.scrollTo($("#gameRSVPAnchor"),500,function(){if(doEffect==true){$("#cb_rsvp").effect("pulsate",{mode:"show",times:1},350);}});}}
function toggleGameNotes(event,gameId){stopBubble(event);var divId='gameNotes_gameId_'+gameId;var arrowId='gameNotes_arrow_gameId_'+gameId;var linkTextId='gameNotes_linkText_gameId_'+gameId;var linkTextSpan=document.getElementById(linkTextId);if($("#gameNotes_gameId_"+gameId+":visible").length==1){$(linkTextSpan).html("Show comments");}else{$(linkTextSpan).html("Hide comments");}
jqShowHideExpandIcon(divId,arrowId,'toggle',TC_SITE_ROOT,null);enableAjaxCalls();return false;}
var ajax_getEventDetailsHtml_data={lastGameId:0,eventClientX:0,eventClientY:0};var ajax_getEventDetailsHtml_event_clientX;var ajax_getEventDetailsHtml_event_clientY;function ajax_getEventDetailsHtml(event,gameId,teamId,currentRSVPStatus,scheduleMode){ajax_getEventDetailsHtml_data.lastGameId=gameId;ajax_getEventDetailsHtml_data.eventClientX=event.clientX;ajax_getEventDetailsHtml_data.eventClientY=event.clientY;var ajax_url=TC_SITE_ROOT+"ajax/ajax_getCalendarEventDetailsHtml.php";var params=[];params.gameId=gameId;params.teamId=teamId;params.currentRSVPStatus=currentRSVPStatus;params.scheduleMode=scheduleMode;var ajax_data=BuildQuerystring(params);var ajax_async=true;var ajax_beforeSendCallback=function(){};var ajax_successCallback=function(responseData){var gameId=ajax_getEventDetailsHtml_data.lastGameId;var clientX=ajax_getEventDetailsHtml_data.eventClientX;var clientY=ajax_getEventDetailsHtml_data.eventClientY;var popupSizePosition=getPopupSizePosition(clientX,clientY,500,300,false);$("#dialog_calendarEventDetails").html(responseData);loadGMap("calEventDetails_googleMap_gameId_"+gameId,{showTypeControl:false,showMarkerDetails:false,zoomLevel:11,locationName:$("#calEventDetails_gameId"+gameId+"_name").html(),locationAddressBarePlain:$("#calEventDetails_gameId"+gameId+"_address_bare").html(),locationAddressEncoded:$("#calEventDetails_gameId"+gameId+"_address_encoded").html()});TC_Util.wireJqDialogBox("dialog_calendarEventDetails",{title:"Event Details",minWidth:popupSizePosition.width,modal:false,position:[popupSizePosition.left,popupSizePosition.top]});$("#dialog_calendarEventDetails").dialog("open");var locationName=$("#calEventDetails_gameId"+gameId+"_name").html();var locationAddressBare=$("#calEventDetails_gameId"+gameId+"_address_bare").html();var locationAddressEncoded=$("#calEventDetails_gameId"+gameId+"_address_encoded").html();var locationCity=$("#calEventDetails_gameId"+gameId+"_city").html();loadGMap('calEventDetails_googleMap_gameId_'+gameId,false,false,locationName,locationAddressBare,locationAddressEncoded,locationCity);};var ajax_errorCallback=function(XMLHttpRequest,textStatus,errorThrown){};jqueryAjax(ajax_url,ajax_data,ajax_async,ajax_beforeSendCallback,ajax_successCallback,ajax_errorCallback);}
function bindRSVPHotkeys(){$(document).ready(function(){$(".rsvpHotkey").bind("keydown","esc",function(){showHideGameRSVPSections('','status');return false;});});}
function validateGameRSVP(userId){var addlMale=$.trim($("#rsvp_addlMale_"+userId).val());var addlFemale=$.trim($("#rsvp_addlFemale_"+userId).val());var comments=$.trim($("#rsvp_comments_"+userId).val());var option_allowExtraPlayers=$("rsvp_option_allowExtraPlayers").val();if(option_allowExtraPlayers=="yes"){if(((addlMale)!=""&&isNaN(addlMale))||(addlFemale)!=""&&isNaN(addlFemale)){showHideExpandIcon("trRSVPExtraPlayers_"+userId,"trRSVPExtraPlayers_"+userId+"_plusMinus","show",TC_SITE_ROOT);alert("Please enter numbers only for extra players.");$("#rsvp_addlMale_"+userId).focus();return false;}}
if($(".chk_rsvpBoxRadio_"+userId+":checked").length<=0){alert('Please select an RSVP status.');return false;}
var commentsLength=comments.length;rsvpCommentsMaxLength=parseInt(rsvpCommentsMaxLength,10);if(commentsLength>rsvpCommentsMaxLength){alert("Please enter a comment that is "+rsvpCommentsMaxLength+" characters or less (you have "+commentsLength+")");$("#rsvp_comments_"+userId).focus();return false;}
return true;}
var divPlayerRSVPFormHtmlDivId='divPlayerRSVPFormTemplate';function showHideGameRSVPSections(userId,mode){var rsvpUserIdsList=document.getElementById('rsvpUserIds').value;var rsvpUserIds=rsvpUserIdsList.split(',');var rsvpUserCount=rsvpUserIds.length;$("#ad_side_175x").hide();for(var i=0;i<rsvpUserCount;i++){$(document).ready(function(){$("#divPlayerRSVPLabel_"+rsvpUserIds[i]).slideDown("fast");$("#divPlayerRSVPDisplay_"+rsvpUserIds[i]).slideDown("fast");$("#divPlayerRSVPForm_"+rsvpUserIds[i]).slideUp("fast");});}
$(document).ready(function(){if(userId!=''){if(mode=='status'){$("#divPlayerRSVPForm_"+userId).slideUp("fast",function(){$("#divPlayerRSVPLabel_"+userId).slideDown("normal");$("#divPlayerRSVPDisplay_"+userId).slideDown("normal");});}else if(mode=='form'){if(rsvpUserCount>1){$("#divPlayerRSVPLabel_"+userId).hide();$("#divPlayerRSVPDisplay_"+userId).hide();$("#divPlayerRSVPForm_"+userId).slideDown("fast");}else{$("#divPlayerRSVPLabel_"+userId).slideUp("fast");$("#divPlayerRSVPDisplay_"+userId).slideUp("fast");$("#divPlayerRSVPForm_"+userId).slideDown("fast");}}}});}
function populateRSVPData(userId){var addlMale=document.getElementById('rsvp_addlMale_'+userId);var addlFemale=document.getElementById('rsvp_addlFemale_'+userId);var comments=document.getElementById('rsvp_comments_'+userId);radGameRSVPStatus_yes.checked=false;if(radGameRSVPStatus_maybe){radGameRSVPStatus_maybe.checked=false;}
radGameRSVPStatus_no.checked=false;switch(status){case'playing':radGameRSVPStatus_yes.checked=true;break;case'tentative':if(radGameRSVPStatus_maybe){radGameRSVPStatus_maybe.checked=true;}
break;case'notplaying':radGameRSVPStatus_no.checked=true;break;}
rsvp_addlMale.value=addlMale;rsvp_addlFemale.value=addlFemale;rsvp_comments.value=comments;}
function doRSVPSave(userId){if(validateGameRSVP(userId)){ajax_saveGameRSVP(userId);}}
function removeRsvp(userId){if(confirm('Are you sure you want to remove your RSVP for this event?')){$("#rsvp_removeRsvp_"+userId).val("1");ajax_saveGameRSVP(userId);}}
var doAjaxCalls=true;function GetAjaxRequestObj(){var ajaxRequest;if(window.XMLHttpRequest){try{ajaxRequest=new XMLHttpRequest();}catch(e){}}else if(window.ActiveXObject){try{ajaxRequest=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){}}
return ajaxRequest;}
function DoAjaxRequest(ajaxRequest,responseHandlerFunction,requestMethod,url,parameters,asynchronous){if(doAjaxCalls==false){return false;}
if(ajaxRequest){var currentDate=new Date();var timestamp=currentDate.getTime();if(parameters==null){parameters='';}
if(parameters==''){parameters="z="+timestamp;}else{parameters+="&z="+timestamp;}
ajaxRequest.open(requestMethod,url,asynchronous);ajaxRequest.onreadystatechange=responseHandlerFunction;ajaxRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded');ajaxRequest.send(parameters);return true;}else{return false;}}
function AjaxRequestSuccessful(ajaxRequest){if(ajaxRequest.readyState==4&&ajaxRequest.status==200){return true;}else{return false;}}
function setProgressIndicator(elementId,state){var progressIndicator=document.getElementById(elementId);if(progressIndicator==null){return;}
if(state!=''){progressIndicator.style.display='';}
switch(state){case"progressTiny":progressIndicator.src=TC_STATIC_URL+'images/ajax/anim_circleArrows.gif';break;case"progress":progressIndicator.src=TC_STATIC_URL+'images/ajax/anim_radialLines.gif';break;case"progressBig":progressIndicator.src=TC_STATIC_URL+'images/ajax/anim_radialLines.gif';break;case"errorTiny":progressIndicator.src=TC_STATIC_URL+'images/ajax/warning.gif';break;case"error":progressIndicator.src=TC_STATIC_URL+'images/ajax/warning.gif';break;case"errorBig":progressIndicator.src=TC_STATIC_URL+'images/ajax/ajax_warning.gif';break;case"completeTiny":progressIndicator.src=TC_STATIC_URL+'images/ajax/checkmark.gif';break;case"complete":progressIndicator.src=TC_STATIC_URL+'images/ajax/checkmark.gif';break;case"completeBig":progressIndicator.src=TC_STATIC_URL+'images/ajax/ajax_success.gif';break;default:progressIndicator.src=TC_STATIC_URL+'images/spacer.gif';break;}}
function cancelAjaxCalls(){doAjaxCalls=false;}
function enableAjaxCalls(){doAjaxCalls=true;}
var GL_GameRsvp={};function ajax_saveGameRSVP(userId){var rsvpValues={};rsvpValues.userId=userId;rsvpValues.gameId=$("#rsvp_gameId").val();rsvpValues.teamId=$("#rsvp_teamId").val();rsvpValues.eventType=$("#rsvp_eventType").val();rsvpValues.addlMale=$("#rsvp_addlMale_"+userId).val();rsvpValues.addlFemale=$("#rsvp_addlFemale_"+userId).val();rsvpValues.comments=$("#rsvp_comments_"+userId).val();rsvpValues.option_allowExtraPlayers=$("#rsvp_option_allowExtraPlayers").val();rsvpValues.status=$(".chk_rsvpBoxRadio_"+rsvpValues.userId+":checked").val();if($("#rsvp_removeRsvp_"+userId).val()=="1"){rsvpValues.status="noresponse";}
GL_GameRsvp.oldStatus=rsvpValues.status;GL_GameRsvp.teamId=$("#rsvp_teamId").val();GL_GameRsvp.eventType=$("#rsvp_eventType").val();var url=TC_SITE_ROOT+'ajax/ajax_saveGameRSVP.php';var ajax_data="token=&rsvpAsUserId="+jsEscape(rsvpValues.userId)+"&gameId="+jsEscape(rsvpValues.gameId)+"&teamId="+jsEscape(rsvpValues.teamId)+"&status="+jsEscape(rsvpValues.status)+"&comments="+jsEscape(rsvpValues.comments);if(rsvpValues.option_allowExtraPlayers=="yes"){ajax_data+="&addlMale="+jsEscape(rsvpValues.addlMale)+"&addlFemale="+jsEscape(rsvpValues.addlFemale);}
var ajax_async=true;jqueryAjax(TC_SITE_ROOT+"ajax/ajax_saveGameRSVP.php",ajax_data,ajax_async,function(){gameRSVPShowStatus('reset');TC_Util.setContentBoxIcon("rsvp","ajaxProgress");GL_GameRsvp.gameId=rsvpValues.gameId;GL_GameRsvp.newStatus=rsvpValues.status;GL_GameRsvp.rsvpAsUserId=userId;},function(Response){if(TC_DEV_MODE=="1"){alert("Response.success: "+Response.success+"\nResponse.statusCode: "+Response.statusCode+"\nResponse.data: "+Response.data);}
if(Response.success==true){gameRSVPShowStatus('complete');LoadGameAttendanceListHtml(GL_GameRsvp.gameId,GL_GameRsvp.eventType,GL_GameRsvp.teamId);var rsvp_impersonate=false;var userId_updated=TC_USERID;if(GL_GameRsvp.rsvpAsUserId!=''&&GL_GameRsvp.rsvpAsUserId!=TC_USERID){rsvp_impersonate=true;userId_updated=GL_GameRsvp.rsvpAsUserId;}
if(rsvp_impersonate==false){if(GL_GameRsvp.newStatus!="noresponse"){var statusListDisplay;try{statusListDisplay=eval("statusDisplayShort."+GL_GameRsvp.eventType+"."+GL_GameRsvp.newStatus);}catch(e){statusListDisplay="";}
$("#eventScheduleUserStatus_"+GL_GameRsvp.gameId).attr("class","tc_gameRSVP_"+GL_GameRsvp.newStatus);$("#eventScheduleUserStatus_"+GL_GameRsvp.gameId).html(statusListDisplay);$("#eventScheduleUserStatusRSVPLink_"+GL_GameRsvp.gameId).html("Edit RSVP");}else{$("#eventScheduleUserStatus_"+GL_GameRsvp.gameId).html("");$("#eventScheduleUserStatusRSVPLink_"+GL_GameRsvp.gameId).html("RSVP");$(".chk_rsvpBoxRadio_"+rsvpValues.userId).attr("checked","");$("#rsvp_comments_"+userId).val("");$("#rsvp_addlMale_"+userId).val("");$("#rsvp_addlFemale_"+userId).val("");}}
var statusDisplayText=$("#rsvp_statusDisplay_"+GL_GameRsvp.newStatus).val();$("#spanGameRSVPStatusText_"+userId_updated).html(statusDisplayText);$("#spanGameRSVPStatusText_"+userId_updated).attr("class","tc_gameRSVP_"+GL_GameRsvp.newStatus);if(GL_GameRsvp.newStatus=="noresponse"){$("#rsvp_removeRsvpLink").hide();}else{$("#rsvp_removeRsvpLink").show();}
$("#rsvp_removeRsvp_"+userId).val("");showHideGameRSVPSections(userId_updated,'status');$("#ad_side_175x").slideDown();TrackGAEvent('RSVP','Save RSVP','Status: '+GL_GameRsvp.newStatus+', User ID: '+userId_updated+', Team ID: '+GL_GameRsvp.teamId);}else{if(Response.statusCode=="rsvpNotAllowed"){gameRSVPShowStatus('reset');LoadGameRSVPHtml(GL_GameRsvp.eventType,GL_GameRsvp.gameId,false,function(){});alert('Sorry, your RSVP could not be saved for this event based on your team\'s settings. Please contact your coach or team manager if you have any questions.');return;}else if(Response.statusCode=="rsvpOverTotal"){LoadGameAttendanceListHtml(GL_GameRsvp.gameId,GL_GameRsvp.eventType,GL_GameRsvp.teamId);gameRSVPShowStatus('reset');alert('Sorry, your RSVP could not be saved because it would bring the total number of players over the maximum allowed for this event. Please contact your coach or team manager if you have any questions.');return;}else if(Response.statusCode=="rsvpRemovalNotAllowed"){gameRSVPShowStatus('reset');LoadGameRSVPHtml(rsvpValues.eventType,rsvpValues.gameId,false,function(){})
alert('Sorry, your RSVP could not be removed.');return;}else if(Response.statusCode=="notSignedIn"){window.location=TC_LOGOUTPAGE+"?status=ajaxNotSignedIn&allowAutologin=0&redirect="+jsEscape(window.location);}else{gameRSVPShowStatus('error');return;}}},function(){gameRSVPShowStatus('error');});}
var ajaxRequest_gameRSVPHtml;function LoadGameRSVPHtml(eventType,gameId,showForm,callback){if(!doAjaxCalls){return;}
if(showForm==true){showForm='1';}
if(callback==undefined){callback=function(){};}
if(eventType=="bye"){$("#cb_rsvp").slideUp();$("#cb_attList").slideUp();$("#attendanceListFootnote").slideUp();return;}else{$("#cb_rsvp").slideDown();$("#cb_attList").slideDown();$("#attendanceListFootnote").slideDown();}
var ajax_url=TC_SITE_ROOT+'ajax/ajax_getGameRSVPHtml.php';var params=[];params.token="";params.gameId=gameId;params.showForm=showForm;var ajax_data=BuildQuerystring(params);var ajax_async=true;var ajax_beforeSendCallback=function(){gameRSVPShowStatus('reset');TC_Util.setContentBoxIcon('rsvp','ajaxProgress');};var ajax_successCallback=function(responseData){$("#gameRSVPHtml").html(responseData);bindImageCheckRadios("input[type=radio].chk_rsvpBoxRadio","jqCheckbox_radioBox");bindRSVPHotkeys();TC_Util.setContentBoxIcon('rsvp',null);callback();};var ajax_errorCallback=function(){gameRSVPShowStatus('error');GL_GameRsvp.gameId=0;};jqueryAjax(ajax_url,ajax_data,ajax_async,ajax_beforeSendCallback,ajax_successCallback,ajax_errorCallback);}
function LoadGameAttendanceListHtml(gameId,eventType,teamId){if(!doAjaxCalls){return;}
var ajax_url=TC_SITE_ROOT+"ajax/ajax_getGameAttendanceHtml.php";var params=[];params.token="";params.gameId=gameId;params.teamId=teamId;var ajax_data=BuildQuerystring(params);var ajax_async=true;var ajax_beforeSendCallback=function(){if(eventType=='bye'){$("#tblAttendanceSummary").hide();}else{$("#tblAttendanceSummary").show();}
TC_Util.setContentBoxIcon('attList','ajaxProgress');};var ajax_successCallback=function(responseData){if(responseData=="0"){attendanceListShowStatus('error');return;}else if(responseData=="-1"){TC_Util.RedirectToLoginPage();return;}
if(responseData==""){$("#cb_attList").slideUp();$("#attendanceListFootnote").slideUp();}else{$("#attendanceListHtml").html(responseData);}
attendanceListShowStatus('reset');};var ajax_errorCallback=function(XMLHttpRequest,textStatus,errorThrown){attendanceListShowStatus('error');};jqueryAjax(ajax_url,ajax_data,ajax_async,ajax_beforeSendCallback,ajax_successCallback,ajax_errorCallback);}
function ajax_getFieldInfoHtml(fieldId){var ajax_url=TC_SITE_ROOT+"ajax/ajax_getFieldInfoHtml.php";var params=[];params.token="";params.fieldId=fieldId;var ajax_data=BuildQuerystring(params);var ajax_async=true;var ajax_beforeSendCallback=function(){};var ajax_successCallback=function(responseData){if(responseData=="0"){return;}else if(responseData=="-1"){TC_Util.RedirectToLoginPage();return;}else{viewFieldPopup(responseData);}
enableAjaxCalls();};var ajax_errorCallback=function(XMLHttpRequest,textStatus,errorThrown){};jqueryAjax(ajax_url,ajax_data,ajax_async,ajax_beforeSendCallback,ajax_successCallback,ajax_errorCallback);}
function loadSports(shortList){var ajax_url=TC_SITE_ROOT+"ajax/ajax_getSports.php";var params=[];if(shortList==true){params.shortList=1;}
var ajax_data=BuildQuerystring(params);var ajax_async=true;var ajax_beforeSendCallback=function(){setProgressIndicator('imgLoadSportsProgressIndicator','progress');};var ajax_successCallback=function(responseData){if(responseData=="0"){setProgressIndicator('imgLoadSportsProgressIndicator','error');return;}else{setProgressIndicator('imgLoadSportsProgressIndicator','');sportsArray=responseData.split('\n');var sportDropdownId=$("#sportDropdownId").val();var sportDropdown=document.getElementById(sportDropdownId);sportDropdown.options.length=0;sportDropdown.options[sportDropdown.options.length]=new Option('','');for(var i=0;i<sportsArray.length;i++){if(sportsArray[i].indexOf('***')>=0){var tempArray=sportsArray[i].split('***');sportDropdown.options[sportDropdown.options.length]=new Option(decodeURIComponent(tempArray[1]),tempArray[0]);if(tempArray[1].toLowerCase()==newSportName.toLowerCase()){sportDropdown.selectedIndex=sportDropdown.options.length-1;}}}
return;}};var ajax_errorCallback=function(XMLHttpRequest,textStatus,errorThrown){setProgressIndicator('imgLoadSportsProgressIndicator','error');};jqueryAjax(ajax_url,ajax_data,ajax_async,ajax_beforeSendCallback,ajax_successCallback,ajax_errorCallback);}
var newSportName='';function addSport(loadShortList){var sportName=document.getElementById('sportName').value;if(trim(sportName)==''){alert('Please enter a sport name.');document.getElementById('sportName').focus();return false;}
newSportName=sportName;var ajax_url=TC_SITE_ROOT+"ajax/ajax_addSport.php";var params=[];params.token="";params.sportName=sportName;var ajax_data=BuildQuerystring(params);var ajax_async=true;var ajax_beforeSendCallback=function(){};var ajax_successCallback=function(responseData){if(responseData=="-1"||responseData=="0"){alert('An error occurred while trying to add the new sport.');}else{loadSports(loadShortList);closeJqDialog("dialog_addNewSport");resetAddNewSportForm();}};var ajax_errorCallback=function(XMLHttpRequest,textStatus,errorThrown){alert('An error occurred while trying to add the new sport.');};jqueryAjax(ajax_url,ajax_data,ajax_async,ajax_beforeSendCallback,ajax_successCallback,ajax_errorCallback);return true;}
function resetAddNewSportForm(){document.getElementById('sportName').value='';}
function resetAddNewLeagueForm(){document.getElementById('leagueName').value='';document.getElementById('leagueWebsiteUrl').value='';document.getElementById('leagueCity').value='';document.getElementById('leagueZipCode').value='';}
function DoShare(oLink,shareTarget,shareData){var finalUrl;switch(shareTarget){case"facebook":finalUrl="http://www.facebook.com/share.php?u="+encodeURIComponent(shareData.url)
break;case"twitter":finalUrl="http://twitter.com/?status="+encodeURIComponent(shareData.tweet)
break;case"email":finalUrl="mailto:?body="+encodeURIComponent(shareData.emailBody)+"&subject="+encodeURIComponent(shareData.emailSubject);break;}
oLink.href=finalUrl;}
function getElementValues(selector){var values=$(selector).map(function(i,n){return $(n).val();}).get();return values;}
function clearField(elementSelector){$(elementSelector).val("");$(elementSelector).focus();}
function cleanupTimeValue(value){value=$.trim(value);if(/^[0-9]$|^[0-9][0-3]$/.test(value)){value=value+":00";}else if(/^[0-9]{3}$/.test(value)){value=value.substr(0,1)+":"+value.substr(1,2);}else if(/^[0-9]{4}$/.test(value)){value=value.substr(0,2)+":"+value.substr(2,3);}
value=value.replace('.',':');value=value.replace('-',':');value=value.replace(' ',':');return value;}
function setAmPm(timeValue,selector){var timeParts=timeValue.match(/^([0-9]{1,2}):([0-9]{2})$/);if(timeParts==undefined){}else{if(timeParts.length==3){var timePart_hour=timeParts[1];var timePart_mins=timeParts[2];if(timePart_hour>=13&&timePart_hour<=23){timeValue=(parseInt(timePart_hour)-12)+":"+timePart_mins;$(selector).val("pm");}}}
return timeValue;}